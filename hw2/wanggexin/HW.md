# HW2 Task
Gexin WANG

## Task1

### Q1
What are the outputs of the following expressions?

```julia
julia> Tropical(1.0) + Tropical(3.0)
julia> Tropical(1.0) * Tropical(3.0)
julia> one(Tropical{Float64})
julia> zero(Tropical{Float64})
```

### A1
```julia
julia> Tropical(1.0) + Tropical(3.0)
3.0ₜ

julia> Tropical(1.0) * Tropical(3.0)
4.0ₜ

julia> one(Tropical{Float64})
0.0ₜ

julia> zero(Tropical{Float64})
-Infₜ
```

### Q2
What is the type and supertype of `Tropical(1.0)`?

### A2
```julia
julia> typeof(Tropical(1.0))
Tropical{Float64}

julia> supertype(typeof(Tropical(1.0)))
AbstractSemiring
```

### Q3
Is `Tropical` a concrete type or an abstract type?

### A3
```julia
julia> isabstracttype(Tropical)
false
```

It is an abstract type.

### Q4
Is `Tropical{Real}` a concrete type or an abstract type?

### A4
```julia
julia> isabstracttype(Tropical{Real})
false
```

It is a concrete type.

### Q5
Benchmark and profile the performance of Tropical matrix multiplication:

```julia
A = rand(Tropical{Float64}, 100, 100)
B = rand(Tropical{Float64}, 100, 100)
C = A * B   # please measure the time taken
```

write a brief report on the performance of the tropical matrix multiplication.

### A5
```julia
julia> using BenchmarkTools

julia> using Profile

julia> A = rand(Tropical{Float64}, 100, 100)
100×100 Matrix{Tropical{Float64}}:
   0.5761440527856878ₜ    0.12049067168188965ₜ  0.42424157761138126ₜ  …  0.22068835868042624ₜ   0.5076110941129108ₜ   0.5693866577794603ₜ
  0.49708291883455835ₜ     0.5805379767208166ₜ  0.18805324996396455ₜ     0.13832083648983473ₜ   0.3962483951923301ₜ   0.2599647632937988ₜ
   0.8598745689444975ₜ    0.18400757537699475ₜ   0.8343351774606284ₜ      0.8600336891297828ₜ   0.5161956017582647ₜ   0.5188408871908384ₜ
  0.22725807179394764ₜ      0.587532467935114ₜ   0.8103560548421035ₜ      0.8394025407374524ₜ   0.8812311074321512ₜ   0.9866693139349129ₜ
  0.35043912500844654ₜ     0.2130089333955042ₜ    0.833222602612526ₜ     0.19181667281250536ₜ   0.6423582399154575ₜ  0.14345682586330177ₜ
  0.12637375046736699ₜ    0.04543434628145793ₜ  0.21539517769612693ₜ  …  0.25630935534428667ₜ  0.06202356080523219ₜ   0.4712121183669611ₜ
 0.020421640993021906ₜ     0.4231393093033514ₜ    0.542710262690201ₜ      0.8282044499556872ₜ  0.17776738617584764ₜ   0.2100087952907711ₜ
  0.44412132928365533ₜ  0.0028170876599125094ₜ  0.08117250244597052ₜ     0.36840692006505804ₜ   0.5608066234626141ₜ  0.11717973645666946ₜ
   0.5496710442132345ₜ     0.9922771382770851ₜ  0.40580515247460547ₜ      0.9826272222056318ₜ   0.9428763335326138ₜ  0.06151576824478888ₜ
                     ⋮                                                ⋱                                              
    0.402539558309678ₜ     0.5353432297168672ₜ   0.7843675723521332ₜ      0.7216034847900036ₜ   0.4887165554156204ₜ  0.43551724056346053ₜ
   0.1569102455607151ₜ     0.8132277062317689ₜ   0.8628674686215126ₜ      0.3998115182751477ₜ   0.5714809537510666ₜ   0.4511640121813314ₜ
   0.2608557334214029ₜ     0.5582762723095677ₜ  0.13980497426246707ₜ     0.23800571391406578ₜ    0.965327359638159ₜ  0.25511491514469853ₜ
   0.9922530504613588ₜ     0.6359971726014046ₜ  0.31446156019514115ₜ     0.24950618897477606ₜ   0.5211225262095849ₜ  0.05459124476197075ₜ
   0.3493774153244664ₜ    0.11365922986549393ₜ   0.1706337383822618ₜ  …   0.4987747024892958ₜ   0.5807453350802392ₜ   0.7626295281066344ₜ
    0.556742153630854ₜ     0.8962259221115357ₜ   0.9003832284568615ₜ     0.06948364719155875ₜ   0.7193140043599027ₜ   0.5201342232771671ₜ
  0.24525047378646514ₜ    0.11255843893920836ₜ   0.4350606352499361ₜ     0.38513174176021536ₜ   0.8519218052371552ₜ  0.12992661073593914ₜ
  0.46669197764391646ₜ     0.3075932428842345ₜ   0.1050481557257198ₜ       0.162929400954534ₜ  0.06246083827579607ₜ  0.38247219904830765ₜ
   0.6105047590550889ₜ     0.2805695369598148ₜ  0.17768320169973462ₜ      0.9271917637224695ₜ   0.4380220481001539ₜ   0.1583156488408034ₜ

julia> B = rand(Tropical{Float64}, 100, 100)
100×100 Matrix{Tropical{Float64}}:
   0.11111571590219438ₜ   0.6627237086098231ₜ   0.1371771093388553ₜ  …   0.8020084300266347ₜ   0.6176724449795457ₜ  0.18415795351719233ₜ
     0.395533252519108ₜ  0.01957311196021483ₜ   0.3081648543986988ₜ      0.7283569032553479ₜ   0.7703209124907208ₜ  0.05239984325468361ₜ
      0.91900655786924ₜ  0.21938899067442286ₜ   0.9107625342534192ₜ      0.9574404956361714ₜ   0.8886341807839062ₜ   0.8265751070182566ₜ
   0.48754077814597585ₜ  0.06773903874386833ₜ   0.3827205338748213ₜ      0.4395448585452152ₜ   0.6433048203399923ₜ   0.8525247862763712ₜ
   0.16376646915409654ₜ   0.3766822511766117ₜ   0.5163438128305621ₜ     0.27291982655072344ₜ   0.5589896962855968ₜ  0.16332492077886784ₜ
    0.8322580871814949ₜ   0.5923983576617514ₜ   0.7247825737352336ₜ  …   0.2803363099697135ₜ  0.21244946685477484ₜ   0.9962437018870445ₜ
    0.1875126831955547ₜ   0.9962676723771815ₜ   0.8513826005661896ₜ     0.49014159163553994ₜ   0.4030213925340592ₜ   0.8611299752607063ₜ
      0.90327682574835ₜ   0.4133576972021409ₜ  0.43456037929646196ₜ      0.9147067576189921ₜ   0.5469336236209519ₜ   0.6942136748545822ₜ
    0.9701831415648999ₜ   0.5103691383451325ₜ   0.1161977052166886ₜ     0.09056924354852658ₜ   0.2579646666589335ₜ   0.7946363470326722ₜ
                      ⋮                                              ⋱                                              
    0.2884647028137405ₜ   0.2846254167252289ₜ   0.5248448287049349ₜ      0.7685078807859957ₜ   0.9598904317869594ₜ   0.8045504597171821ₜ
      0.47415741880132ₜ   0.5394252596015329ₜ   0.9125931918543009ₜ      0.6490866620026831ₜ   0.9154291295907858ₜ   0.2790591006793346ₜ
    0.8248825969164147ₜ   0.6263331350186955ₜ  0.19779066300346182ₜ     0.15376534907074402ₜ   0.3930608811307045ₜ   0.8671090089120214ₜ
    0.5028155896011586ₜ   0.3527698944754494ₜ   0.8581206024987336ₜ      0.3850201082840562ₜ  0.19807659121027066ₜ  0.06969635110340744ₜ
   0.42456389216513235ₜ   0.7115008387313749ₜ  0.14373089072809608ₜ  …   0.4593170848661341ₜ   0.8344507619733755ₜ   0.8664805674674969ₜ
    0.2562762295922122ₜ   0.5588070556564456ₜ   0.7932915261856817ₜ      0.3564131033108121ₜ   0.5710049787335507ₜ  0.08499475506822707ₜ
    0.8831577138309276ₜ   0.2267125625682891ₜ   0.8195124729934379ₜ      0.5933138192252972ₜ   0.5658639529740227ₜ  0.29261551586924406ₜ
    0.1307373235498115ₜ   0.7267596262116033ₜ   0.5092392825971526ₜ      0.8162872254887675ₜ  0.49917393348842287ₜ  0.06284657993722709ₜ
 0.0025995957172828543ₜ    0.880595645023961ₜ   0.3360122732486629ₜ       0.881994185498067ₜ  0.31252540350891334ₜ   0.5479511996351992ₜ

julia> @btime C = A * B
   725.314 μs (3 allocations: 78.20 KiB)
100×100 Matrix{Tropical{Float64}}:
  1.892080608100237ₜ  1.8866136043295567ₜ  1.8581735467861205ₜ  …  1.9043680747334522ₜ  1.8408969261373254ₜ  1.9554026940684692ₜ
 1.8773349753830024ₜ  1.8991462191851372ₜ   1.811901577623774ₜ     1.9530069403380748ₜ  1.9143599042330441ₜ  1.9313246765888281ₜ
  1.757223196434583ₜ  1.8203325703327524ₜ  1.8919952123113446ₜ     1.8251285630829568ₜ  1.8948311500478294ₜ   1.841875959962198ₜ
  1.881910153397305ₜ   1.867264958958874ₜ  1.7211185890955227ₜ     1.9315455399606618ₜ  1.7902282075759364ₜ  1.9255611217523825ₜ
 1.7867407890149707ₜ  1.7756890150286826ₜ  1.9097973070515084ₜ     1.8983083560310545ₜ  1.9362484333211807ₜ  1.8694169504215128ₜ
  1.921800492357034ₜ  1.7804071330161135ₜ  1.8764380298296075ₜ  …  1.9355593139823553ₜ  1.8069334146190403ₜ  1.9659081825731288ₜ
 1.8363758025337216ₜ  1.9553479808412249ₜ   1.795220547450357ₜ     1.8274336068251271ₜ  1.7856395155032123ₜ  1.9787247907821308ₜ
 1.8171374822447652ₜ  1.7863473179462432ₜ  1.8410886244114817ₜ     1.8050829416966387ₜ  1.8429885357903826ₜ  1.7436699222758993ₜ
 1.9515210808401158ₜ   1.699299274466101ₜ  1.9108514334355369ₜ     1.9394038267746798ₜ  1.8341984102449675ₜ  1.9483614194961925ₜ
                   ⋮                                            ⋱                                            
 1.9475734446166535ₜ   1.709898622428796ₜ   1.891339862210756ₜ      1.794513071394767ₜ  1.8876797743151874ₜ  1.9884221021141535ₜ
  1.886592357334232ₜ  1.8237250445999609ₜ  1.8243000179248514ₜ     1.9667868610491184ₜ  1.8272352833582701ₜ  1.8446975349080983ₜ
 1.8384847912821543ₜ  1.7815433330996142ₜ   1.739571948160179ₜ     1.8641638265185292ₜ  1.7770065587441344ₜ  1.9430090556851942ₜ
 1.8467197236649566ₜ  1.8401677651209793ₜ  1.8084690264896544ₜ     1.9017030069034342ₜ  1.9517910620436867ₜ   1.908939689784809ₜ
  1.798021881305532ₜ  1.8441042139799624ₜ  1.8664562784134286ₜ  …  1.8224651359869464ₜ  1.8111320988620916ₜ  1.9092824478244426ₜ
  1.828503637831278ₜ    1.94067092560164ₜ  1.8245034456612619ₜ     1.8578237240930329ₜ  1.8069090889388237ₜ   1.847913630118772ₜ
 1.8968504499839394ₜ  1.9861160158986908ₜ  1.9541850584341365ₜ     1.9338725115928441ₜ  1.8018743434475462ₜ  1.9676911820775964ₜ
 1.8209567260851895ₜ   1.778922673438164ₜ  1.8406630375093713ₜ     1.8913244042675812ₜ  1.9441653765687874ₜ  1.8867134243174724ₜ
 1.8417710554649958ₜ  1.9611750953084925ₜ  1.9820751554384346ₜ     1.9617626085971422ₜ  1.9566383209530125ₜ  1.9303951734677849ₜ

julia> Profile.init(; delay=0.001)

julia> @profile for _ = 1:10000
           C = A * B
       end

julia> Profile.print(; mincount=10)
Overhead ╎ [+additional indent] Count File:Line; Function
=========================================================
    ╎7789 @VSCodeServer/src/eval.jl:34; (::VSCodeServer.var"#64#65")()
    ╎ 7789 @Base/essentials.jl:1052; invokelatest(::Any)
    ╎  7789 @Base/essentials.jl:1055; #invokelatest#2
    ╎   7789 @VSCodeServer/src/repl.jl:193; (::VSCodeServer.var"#111#113"{Module, Expr, REPL.LineEditREPL, REPL.LineEdit.Prompt})()
    ╎    7789 @Base/logging/logging.jl:632; with_logger
    ╎     7789 @Base/logging/logging.jl:522; with_logstate(f::VSCodeServer.var"#112#114"{Module, Expr, REPL.LineEditREPL, REPL.LineEdit.Prompt}, logst…
    ╎    ╎ 7789 @VSCodeServer/src/repl.jl:192; #112
    ╎    ╎  7789 @VSCodeServer/src/repl.jl:229; repleval(m::Module, code::Expr, ::String)
    ╎    ╎   7789 @Base/Base.jl:130; eval
    ╎    ╎    7789 @Base/boot.jl:430; eval
    ╎    ╎     7789 REPL[12]:1; top-level scope
    ╎    ╎    ╎ 7789 @Profile/src/Profile.jl:59; macro expansion
    ╎    ╎    ╎  7788 REPL[12]:2; macro expansion
    ╎    ╎    ╎   7787 @LinearAlgebra/src/matmul.jl:114; *(A::Matrix{Tropical{Float64}}, B::Matrix{Tropical{Float64}})
    ╎    ╎    ╎    75   @LinearAlgebra/src/matmul.jl:117; matprod_dest
    ╎    ╎    ╎     75   @Base/array.jl:372; similar
    ╎    ╎    ╎    ╎ 75   @Base/boot.jl:592; Array
    ╎    ╎    ╎    ╎  75   @Base/boot.jl:582; Array
    ╎    ╎    ╎    ╎   75   @Base/boot.jl:535; new_as_memoryref
  75╎    ╎    ╎    ╎    75   @Base/boot.jl:516; GenericMemory
    ╎    ╎    ╎    7712 @LinearAlgebra/src/matmul.jl:253; mul!
    ╎    ╎    ╎     7712 @LinearAlgebra/src/matmul.jl:285; mul!
    ╎    ╎    ╎    ╎ 7712 @LinearAlgebra/src/matmul.jl:287; _mul!
    ╎    ╎    ╎    ╎  7712 @LinearAlgebra/src/matmul.jl:868; generic_matmatmul!
  38╎    ╎    ╎    ╎   38   @Base/essentials.jl:0; _generic_matmatmul!(C::Matrix{Tropical{Float64}}, A::Matrix{Tropical{Float64}}, B::Matrix{Tropical{…
    ╎    ╎    ╎    ╎   33   @LinearAlgebra/src/matmul.jl:890; _generic_matmatmul!(C::Matrix{Tropical{Float64}}, A::Matrix{Tropical{Float64}}, B::Matri…
    ╎    ╎    ╎    ╎    33   @LinearAlgebra/src/generic.jl:103; _rmul_or_fill!
    ╎    ╎    ╎    ╎     31   @Base/array.jl:329; fill!
  31╎    ╎    ╎    ╎    ╎ 31   @Base/array.jl:987; setindex!
    ╎    ╎    ╎    ╎   80   @LinearAlgebra/src/matmul.jl:894; _generic_matmatmul!(C::Matrix{Tropical{Float64}}, A::Matrix{Tropical{Float64}}, B::Matri…
    ╎    ╎    ╎    ╎    80   @Base/array.jl:930; getindex
    ╎    ╎    ╎    ╎     22   @Base/abstractarray.jl:1347; _to_linear_index
    ╎    ╎    ╎    ╎    ╎ 22   @Base/abstractarray.jl:3048; _sub2ind
    ╎    ╎    ╎    ╎    ╎  22   @Base/abstractarray.jl:3064; _sub2ind
    ╎    ╎    ╎    ╎    ╎   22   @Base/abstractarray.jl:3080; _sub2ind_recurse
    ╎    ╎    ╎    ╎    ╎    22   @Base/abstractarray.jl:3080; _sub2ind_recurse
  22╎    ╎    ╎    ╎    ╎     22   @Base/int.jl:88; *
  58╎    ╎    ╎    ╎     58   @Base/essentials.jl:917; getindex
    ╎    ╎    ╎    ╎   7540 @LinearAlgebra/src/matmul.jl:895; _generic_matmatmul!(C::Matrix{Tropical{Float64}}, A::Matrix{Tropical{Float64}}, B::Matri…
 215╎    ╎    ╎    ╎    811  @Base/simdloop.jl:75; macro expansion
 596╎    ╎    ╎    ╎     596  @Base/int.jl:83; <
    ╎    ╎    ╎    ╎    6649 @Base/simdloop.jl:77; macro expansion
    ╎    ╎    ╎    ╎     6649 @LinearAlgebra/src/matmul.jl:896; macro expansion
    ╎    ╎    ╎    ╎    ╎ 1564 @Base/array.jl:930; getindex
1564╎    ╎    ╎    ╎    ╎  1564 @Base/essentials.jl:917; getindex
1687╎    ╎    ╎    ╎    ╎ 1688 @Base/array.jl:994; setindex!
    ╎    ╎    ╎    ╎    ╎ 3397 @Base/promotion.jl:633; muladd
    ╎    ╎    ╎    ╎    ╎  261  …2025Spring-Homeworks/hw2/wanggexin/TMP.jl:36; *
 261╎    ╎    ╎    ╎    ╎   261  @Base/float.jl:491; +
    ╎    ╎    ╎    ╎    ╎  3136 …2025Spring-Homeworks/hw2/wanggexin/TMP.jl:48; +
    ╎    ╎    ╎    ╎    ╎   220  @Base/math.jl:838; max
 220╎    ╎    ╎    ╎    ╎    220  @Base/float.jl:492; -
    ╎    ╎    ╎    ╎    ╎   2083 @Base/math.jl:839; max
1905╎    ╎    ╎    ╎    ╎    1905 @Base/essentials.jl:796; ifelse
 178╎    ╎    ╎    ╎    ╎    178  @Base/floatfuncs.jl:15; signbit
    ╎    ╎    ╎    ╎    ╎   833  @Base/math.jl:841; max
 833╎    ╎    ╎    ╎    ╎    833  @Base/essentials.jl:796; ifelse
    ╎    ╎    ╎    ╎    80   @Base/simdloop.jl:78; macro expansion
  80╎    ╎    ╎    ╎     80   @Base/int.jl:87; +
  20╎    ╎    ╎    ╎   21   @LinearAlgebra/src/matmul.jl:898; _generic_matmatmul!(C::Matrix{Tropical{Float64}}, A::Matrix{Tropical{Float64}}, B::Matri…
Total snapshots: 7789. Utilization: 100% across all threads and tasks. Use the `groupby` kwarg to break down by thread and/or task.
```



## Task2


```julia
# set definition
function ⊕(s::Set{Int}, t::Set{Int})
    return union(s, t)
end

function ⊙(s::Set{Int}, t::Set{Int})
    return Set([a * b for a in s for b in t])
end

setzero = Set{Int}()
setone = Set([1])

# test cases
@assert ⊕(Set([2]), Set([5,4])) == Set([2,4,5])
@assert ⊕(Set([5,4]), Set([2])) == Set([2,4,5])
@assert ⊕(Set([2]), setzero) == Set([2])
@assert ⊙(Set([2]), Set([5,4])) == Set([10,8])
@assert ⊙(Set([5,4]), Set([2])) == Set([10,8])
@assert ⊙(Set([2]), setzero) == Set{Int}()
@assert ⊙(Set([2]), setone) == Set([2])

```

Test Passed